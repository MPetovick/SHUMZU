<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHUMZU - Secure QR Transfer</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --neon-cyan: #00f3ff;
            --dark-bg: #0a0a0f;
        }

        body {
            margin: 0;
            padding: 1rem;
            background: var(--dark-bg);
            font-family: 'Space Grotesk', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: #fff;
            text-align: center;
        }

        .logo-container {
            margin: 1rem 0;
            animation: float 3s ease-in-out infinite;
        }

        #logo {
            width: min(30vw, 150px);
            filter: drop-shadow(0 0 15px var(--neon-cyan));
        }

        h2 {
            color: var(--neon-cyan);
            text-shadow: 0 0 10px var(--neon-cyan);
            margin: 0 1rem 1rem;
            font-size: clamp(0.9rem, 3vw, 1.2rem);
            line-height: 1.4;
            max-width: 800px;
        }

        .camera-container {
            position: relative;
            width: min(90vw, 400px);
            aspect-ratio: 1;
            margin: 1rem auto;
            border: 2px solid var(--neon-cyan);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.1);
            cursor: default;
        }

        #video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .inactive-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 15, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease, visibility 0s linear 0.3s;
            pointer-events: none;
        }

        .camera-container.active .inactive-overlay {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s linear;
        }

        .fingerprint {
            width: 50%;
            height: 50%;
            opacity: 0.8;
            animation: fingerprint-pulse 2s infinite;
        }

        .scanning-lines {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .scanning-lines .line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: linear-gradient(
                to right,
                transparent 0%,
                var(--neon-cyan) 50%,
                transparent 100%
            );
            animation: scan 2s infinite;
            opacity: 0.3;
        }

        .social-container {
            display: flex;
            gap: 2rem;
            margin: 2rem 0;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            transition: all 0.3s ease;
            filter: drop-shadow(0 0 5px var(--neon-cyan));
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
        }

        @keyframes fingerprint-pulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        @keyframes scan {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @media (max-width: 480px) {
            body { padding: 0.5rem; }
            .social-container { gap: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="logo-container">
        <img id="logo" src="rsc/logo_SHUMZU.png" alt="SHUMZU Logo">
    </div>

    <h2>Secure data solution combining compression, encryption, and QR codes for efficient transmission</h2>

    <div class="camera-container" id="cameraContainer">
        <video id="video" autoplay playsinline></video>
        <div class="inactive-overlay" id="inactiveOverlay">
            <svg class="fingerprint" viewBox="0 0 100 100">
                <path d="M50 10 Q60 20 50 30 Q40 20 50 10" stroke="var(--neon-cyan)" stroke-width="2" fill="none"/>
                <path d="M30 20 Q40 30 50 40 Q60 30 70 20" stroke="var(--neon-cyan)" stroke-width="2" fill="none"/>
                <path d="M20 30 Q30 40 40 50 Q50 40 60 30" stroke="var(--neon-cyan)" stroke-width="2" fill="none"/>
                <path d="M10 40 Q20 50 30 60 Q40 50 50 40" stroke="var(--neon-cyan)" stroke-width="2" fill="none"/>
                <path d="M60 40 Q70 50 80 60 Q90 50 90 40" stroke="var(--neon-cyan)" stroke-width="2" fill="none"/>
            </svg>
            <div class="scanning-lines">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </div>
        </div>
    </div>

    <div class="social-container">
        <a href="https://t.me/SHUMZUbot" target="_blank" class="social-icon">
            <svg viewBox="0 0 24 24" fill="var(--neon-cyan)">
                <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.14-.26.258-.534.258l.198-2.76 5.518-4.986c.22-.198-.048-.308-.346-.11l-6.816 4.29-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
            </svg>
        </a>
        <a href="https://github.com/mpetovick/SHUMZU" target="_blank" class="social-icon">
            <svg viewBox="0 0 24 24" fill="var(--neon-cyan)">
                <path d="M12 0C5.373 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.6.113.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
            </svg>
        </a>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js"></script>
    <script>
        class QRScanner {
            constructor() {
                this.video = document.getElementById('video');
                this.cameraContainer = document.getElementById('cameraContainer');
                this.inactiveOverlay = document.getElementById('inactiveOverlay');
                this.stream = null;
                this.scanning = false;
                this.init();
            }

            init() {
                this.cameraContainer.addEventListener('click', () => this.toggleCamera());
                window.addEventListener('beforeunload', () => this.cleanup());
            }

            async toggleCamera() {
                if (this.stream) {
                    this.stopCamera();
                } else {
                    await this.startCamera();
                }
            }

            async startCamera() {
                try {
                    this.cameraContainer.classList.add('active');
                    this.stream = await navigator.mediaDevices.getUserMedia({
                        video: {
                            facingMode: 'environment',
                            width: { ideal: Math.min(window.innerWidth, 1280) },
                            height: { ideal: Math.min(window.innerHeight, 720) }
                        }
                    });
                    this.video.srcObject = this.stream;
                    await this.video.play();
                    this.startQRScan();
                } catch (error) {
                    console.error('Error accessing camera:', error);
                    this.cameraContainer.classList.remove('active');
                }
            }

            stopCamera() {
                this.scanning = false;
                this.stream.getTracks().forEach(track => track.stop());
                this.stream = null;
                this.video.srcObject = null;
                this.cameraContainer.classList.remove('active');
            }

            startQRScan() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                this.scanning = true;

                const scanFrame = () => {
                    if (!this.scanning) return;

                    canvas.width = this.video.videoWidth;
                    canvas.height = this.video.videoHeight;
                    ctx.drawImage(this.video, 0, 0, canvas.width, canvas.height);

                    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    const code = jsQR(imageData.data, canvas.width, canvas.height);
                    
                    if (code) {
                        console.log('QR Code detected:', code.data);
                        // Handle detected QR code here
                    }

                    requestAnimationFrame(scanFrame);
                };
                scanFrame();
            }

            cleanup() {
                if (this.stream) this.stopCamera();
            }
        }

        // Initialize scanner when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => new QRScanner());
    </script>
</body>
</html>
